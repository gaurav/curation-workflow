{
  "definitions": {
    "identifier": {
      "$id": "#/definitions/identifier",
      "type": "object",
      "title": "Identifier for a publication",
      "required": [
        "type",
        "id"
      ],
      "properties": {
        "type": {
          "enum": [
            "doi"
          ]
        }
      }
    },
    "agent": {
      "$id": "#/definitions/agent",
      "type": "object",
      "required": [
        "name"
      ],
      "properties": {
        "name": {
          "title": "The name of this agent",
          "examples": [
            "Charles Darwin"
          ]
        },
        "alternate": {
          "title": "Alternate name for this agent",
          "examples": [
            "Darwin, Charles"
          ]
        },
        "firstname": {
          "title": "First name for this agent",
          "examples": [
            "Charles"
          ]
        },
        "middlename": {
          "title": "Middle name for this agent",
          "examples": [
            "Robert"
          ]
        },
        "lastname": {
          "title": "Last name for this agent",
          "examples": [
            "Charles"
          ]
        }
      }
    },
    "citation": {
      "$id": "#/definitions/citation",
      "type": "object",
      "required": [
        "type",
        "authors",
        "title",
        "year"
      ],
      "properties": {
        "type": {
          "enum": [
            "article",
            "book",
            "book_section"
          ]
        },
        "title": {
          "type": "string"
        },
        "year": {
          "type": "integer",
          "minimum": -9999,
          "maximum": 9999
        },
        "authors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/agent"
          }
        },
        "editors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/agent"
          }
        },
        "series_editors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/agent"
          }
        },
        "figure": {
          "type": "string",
          "title": "Figure description"
        },
        "publisher": {
          "type": "string",
          "title": "The publisher of this publication"
        },
        "city": {
          "type": "string",
          "title": "The city in which this publication was published"
        },
        "pages": {
          "type": "string",
          "title": "The pages of this publication"
        },
        "identifier": {
          "type": "array",
          "title": "Identifiers for this publication",
          "items": {
            "$ref": "#/definitions/identifier"
          }
        },
        "link": {
          "type": "array",
          "title": "URLs for this publication",
          "items": {
            "type": "object",
            "required": [ "url" ],
            "properties": {
              "url": {
                "type": "string",
                "format": "uri"
              }
            }
          }
        },
        "journal": {
          "type": "object",
          "title": "Information about the journal this publication is in.",
          "required": [ "name" ],
          "properties": {
            "name": {
              "title": "Title of the journal",
              "type": "string"
            },
            "volume": {
              "title": "Volume in this journal",
              "type": "string"
            },
            "identifier": {
              "type": "array",
              "title": "Identifiers for this journal",
              "items": {
                "$ref": "#/definitions/identifier"
              }
            }
          }
        }
      }
    },
    "specifier": {
      "@id": "#/definitions/specifier",
      "type": "object",
      "properties": {
        "verbatimSpecifier": {
          "type": "string"
        },
        "scientificName": {
          "type": "string"
        },
        "canonicalName": {
          "type": "string"
        },
        "nomenclaturalCode": {
          "enum": [ "ICZN", "ICBN", "ICNafp" ]
        }
      }
    }
  },

  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "http://phyloref.org/phyx.js/schema/v1.0.0/phyx.schema.json",
  "type": "object",
  "title": "Phyloreference Exchange (Phyx) schema",
  "required": [
    "@context",
    "phylogenies",
    "phylorefs"
  ],
  "properties": {
    "@context": {
      "type": "string",
      "title": "JSON-LD schema for interpreting this Phyx file",
      "default": "http://www.phyloref.org/phyx.js/context/v0.1.0/phyx.json",
      "examples": [
        "http://www.phyloref.org/phyx.js/context/v0.1.0/phyx.json"
      ]
    },
    "phylogenies": {
      "type": "array",
      "title": "Phylogenies in this Phyx file",
      "items": {
        "type": "object",
        "title": "A single phylogeny in this Phyx file",
        "properties": {
          "newick": {
            "type": "string",
            "title": "This phylogeny in the Newick format (https://en.wikipedia.org/wiki/Newick_format)",
            "examples": [
              "((Homo, Pan)Hominini, Gorilla);"
            ]
          },
          "primaryPhylogenyCitation": {
            "$ref": "#/definitions/citation"
          },
          "phylogenyCitation": {
            "$ref": "#/definitions/citation"
          }
        }
      }
    },
    "phylorefs": {
      "type": "array",
      "title": "The Phylorefs Schema",
      "items": {
        "type": "object",
        "title": "The Items Schema",
        "required": [
          "label",
          "cladeDefinition",
          "internalSpecifiers",
          "externalSpecifiers"
        ],
        "properties": {
          "label": {
            "type": "string",
            "title": "The Label Schema",
            "examples": [
              "Eusuchia"
            ]
          },
          "cladeDefinition": {
            "type": "string",
            "title": "The Cladedefinition Schema",
            "examples": [
              "Eusuchiaâ€‚(Huxley 1875). Amended definition.\n\nLast common ancestor of Hylaeochampsa vectiana, Crocodylus niloticus, Gavialis gangeticus, and Alligator mississippiensis\t and all of its descendents."
            ]
          },
          "internalSpecifiers": {
            "type": "array",
            "title": "Internal specifiers of this phyloreference",
            "items": {
              "$ref": "#/definitions/specifier"
            }
          },
          "externalSpecifiers": {
            "type": "array",
            "title": "External specifiers of this phyloreference",
            "items": {
              "$ref": "#/definitions/specifier"
            }
          },
          "pso:holdsStatusInTime": {
            "type": "array",
            "title": "The Pso:holdsstatusintime Schema",
            "items": {
              "type": "object",
              "title": "The Items Schema",
              "required": [
                "@type",
                "pso:withStatus",
                "tvc:atTime"
              ],
              "properties": {
                "@type": {
                  "type": "string",
                  "title": "The @type Schema",
                  "default": "",
                  "examples": [
                    "http://purl.org/spar/pso/StatusInTime"
                  ],
                  "pattern": "^(.*)$"
                },
                "pso:withStatus": {
                  "type": "object",
                  "title": "The Pso:withstatus Schema",
                  "required": [
                    "@id"
                  ],
                  "properties": {
                    "@id": {
                      "type": "string",
                      "title": "The @id Schema",
                      "default": "",
                      "examples": [
                        "pso:final-draft"
                      ],
                      "pattern": "^(.*)$"
                    }
                  }
                },
                "tvc:atTime": {
                  "type": "object",
                  "title": "The Tvc:attime Schema",
                  "required": [
                    "timeinterval:hasIntervalStartDate"
                  ],
                  "properties": {
                    "timeinterval:hasIntervalStartDate": {
                      "type": "string",
                      "title": "The Timeinterval:hasintervalstartdate Schema",
                      "default": "",
                      "examples": [
                        "2018-06-11T22:46:23.547Z"
                      ],
                      "pattern": "^(.*)$"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
